<script>
  // ジョブキューとタスクキュー:
  // Prmiseによる非同期処理の実行はジョブキューで管理されている
  // setTimeoutなどによる非同期処理の実行はタスクキューで管理されている
  // タスクキューにタスクが格納されている場合にジョブキューが優先される

  // これはタスクキューに登録されたタスク
  //   0ミリ秒の後に実行される。
  // このタスクは、ジョブキューに登録されたジョブがすべて処理されるまで実行されない。
  setTimeout(function task() {
    console.log("Taskの実行");
  });

  //   Promise.resolve()は即座に解決されるPromiseを返す。そのthenメソッドはジョブキューにコールバックを登録。
  // このジョブは、タスクキューのタスクよりも優先されて実行される。
  Promise.resolve().then(function job1() {
    console.log("Job1の実行");
  });
  // ジョブキューに登録されたジョブがすべて処理されるまで、タスクキューのタスクは実行されない
  Promise.resolve().then(function job2() {
    console.log("Job2の実行");
  });
  // 実行中のコンテキストを含むコールスタックが空になった
  console.log("グローバルコンテキスト終了");
  //   出力:
  //  グローバルコンテキスト終了
  //  Job1の実行
  //  Job2の実行
  //  Taskの実行
</script>
