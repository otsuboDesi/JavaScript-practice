<script>
  // イテレータを生成する関数
  // NOTE: イテレータには必ずnext()が必要
  function genIterator(max) {
    let value = 0;
    return {
      // next メソッドの戻り値はvalue, doneを保持するオブジェクト
      next() {
        if (value < max) {
          // valueがmaxより小さいとき
          return {
            done: false, // doneがfalseの場合は反復処理の継続を表す
            // 値はレキシカルスコープの変数valueが保持している
            value: value++, // 変数valueを値として設定してから+1を行う
          };
        } else {
          return {
            done: true, // doneがtrueになると、反復処理の終了を表す
          };
        }
      },
    };
  }
  // max = 3
  const iterator = genIterator(3);
  console.log(iterator.next());

  console.log(iterator.next());

  console.log(iterator.next());

  console.log(iterator.next());
</script>
